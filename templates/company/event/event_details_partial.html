<!-- event_details_partial.html -->
 {% load static %}
{% load imagekit %}



<div id="current-event-container">
    
    

  <div class="event_banner">
    <img src="{{ event.image1.url }}" alt="event_banner" class="banner-image">
    <h5 class="banner-title">{{ event.title }}</h5>
    <!-- Previous button (left side) -->
    {% if previous_event %}
      <button class="navigation-btn next-btn"
              hx-get="{% url 'event_details' previous_event.id %}"
              hx-target="#current-event-container"
              hx-swap="innerHTML">
              &#x2192; <!-- Unicode for right arrow -->
       
      </button>
    {% endif %}

    <!-- Next button (right side) -->
    {% if next_event %}
      <button class="navigation-btn prev-btn"
              hx-get="{% url 'event_details' next_event.id %}"
              hx-target="#current-event-container"
              hx-swap="innerHTML">
              &#x2190; <!-- Unicode for left arrow -->
      </button>
    {% endif %}
  </div>
  <p>{{ event.description }}</p>
  <p><strong>Date:</strong> {{ event.date }}</p>


  

<div class="media-gallery">
  {% for media in media %}   

      {% if media.media_type == 'photo' %}
          <div class="media-item">
              <a id="view_event_media" data-media-id="{{ media.id }}"
                  href="#"
                  hx-get="{% url 'load_media' media.id %}" 
                  hx-trigger="click" 
                  hx-target="#mediaa"  
                  data-bs-toggle="modal"
                  data-bs-target="#event-media-modal"> 
                    
                  <img src="{{ media.media_thumbnail.url }}" class="img-thumbnail" alt="{{ media.caption }}">
              </a>
             
      </div>
      {% elif media.media_type == 'video' %}
         
     
          <div class="vid-thumbnail-container">
              <a id="view_event_mediaa"
              href="#"
              hx-get="{% url 'load_media' media.id %}" 
              hx-trigger="click" 
              hx-target="#mediaa"
              data-bs-toggle="modal"
              data-bs-target="#event-media-modal"> 
        
              <img class="vid-thumbnail" src="{{ media.video_media_thumbnail }}" alt="{{ media.caption }}">
              <div class="play-icon">
                  <i class="fa fa-play"></i>  <!-- Font Awesome play icon -->
              </div>
          </a>            
          </div>
      {% endif %}      
  {% endfor %}    
</div>  


<div class="modal fade" id="event-media-modal" tabindex="-1" aria-labelledby="eventModalLabel" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered modal-lg">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="eventModalLabel"></h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body" id="mediaa">
      <!-- Event details content will be loaded here -->
       {{event_media.caption}}
     
      
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
  </div>
  </div>


  <link rel="stylesheet" href="{% static 'css/event_details.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<script src="{% static 'htmx.min.js' %}"></script>    








<!-- <div id="carouselExampleSlidesOnly" class="carousel slide" data-ride="carousel">
    <div class="carousel-inner">
      <div class="carousel-item active" id="mediaa">
        <img class="d-block w-100" src="..." alt="First slide">
      </div>      
    </div>
  </div>      -->
  
  <!--  -->
                   
                      
                 
               
      
   

<div id ="view_media"></div>              
<script>
  document.getElementById('event-media-modal').addEventListener('hidden.bs.modal', function () {
      var video = document.getElementById('mediaVideo');
      video.pause(); // Pause the video
      video.currentTime = 0; // Reset video to the beginning
  });
  </script>






<!-- <div class="row">
    {% if event.photos %}
      {% for photo in event.photos.all %}
        <div class="col-3 mb-2">
          <a href="#" data-bs-toggle="modal" data-bs-target="#fullImageModal" data-img-src="{{ photo.url }}">
            <img src="{{ photo.url }}" class="img-thumbnail" alt="Event Photo">
          </a>
        </div>
      {% endfor %}
    {% else %}
      <p>No photos available.</p>
    {% endif %}
  </div> -->
<!-- Add more event details as needed -->